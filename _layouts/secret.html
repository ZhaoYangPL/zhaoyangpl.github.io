---
layout: page
---

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
  #secret-container { text-align: center; padding: 20px 0; }
  #secret-controls { margin-bottom: 20px; }
  #secret-content { text-align: left; background-color: #bdbdc4; border: 1px solid #333; padding: 20px 40px; border-radius: 8px; color: #e2e2e2; }
  #secret-container input { font-size: 1em; padding: 10px; border-radius: 5px; border: 1px solid #555; background-color: #3d3d3d; color: #fff; }
  #secret-container button { font-size: 1em; padding: 10px 20px; border-radius: 5px; border: none; background-color: #007acc; color: white; cursor: pointer; }
  #secret-content h1, #secret-content h2, #secret-content h3 { color: #ccc; }
  #secret-content a { color: #3794ff; }
</style>

<div id="secret-container">
  <h2 id="page-title">Enter password to visit</h2>
  <div id="secret-controls">
    <input type="password" id="password-input" placeholder="Please enter password...">
    <button id="decrypt-button">Decoder</button>
  </div>
  <div id="secret-content" style="display:none;"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // const encryptedContent = {{ content | strip | jsonify }};
    const encryptedContent = "Dgr73glJAChRsuYTHp0UuMZcVx0jLLD9yDZPD1XBcMzs0lfuHKPf19GHXJDfDrC2yt9DHBbXgCGcgIvAkr1YkSW2TypjJEdKqb436DAXtjd8BQiPRJMMYvypgQypqBHNm/WlpPuULdmBa9/QzEOEtJaBQt10oJiuO92aVkfNTFU19LnxlK/E/pg6IbkFv8Uc+WSCW1TlwrilEudkGmtUMQezqlYkQNbkoaRZrjntyTza5fv9zKSlnRYvVofT52QVPvfKrlG97v30lKD6te/lTf4H/3G6ZkVL/yB9WndcQyAj8fL9nD3eOrk57xqUXEcwpL8BetWT6gpaGZWrnwVSLSeDghs+6rr7KS7kscmJWrE2AHBmIGSVgx7BwvwXKvRmsy80W0iAMeNpe79QwOfphbEFw7mJPPtVn5sZElOiPiD1Me4JlKrHmHhTUqexHxxPa9lCv11RnNU6CFOHywoL2BNtP76Pxd023DXujq+oTLduuOQs1TInzfKoQuf67vxfF8n+YbLf+TTGl8cTYq3/TRWL2bjIURc/GOTmSTHHRRF2fm5uxSxLUmz9ujVulRM3pb7zWa51pXXgz7ZzMidrDxSJ+gYUC/ZlP8PSfe+55SORzjHYOZv3/p23QSf6+zJfXzIjxlHF9Ifg8Mi+CIgs/L5szgJxgXjvCcAj4USJJnKXKqiYIhCPoE4E6tMXfmeLD14c8fuvEK2dRRBoPvkNgloiI4TCrUoAoZIwLTgokolbu88rZNPmqRO3rKVuJL7SpndqEMWCDSaE5rf3Y1VBig==";
    const passwordInput = document.getElementById('password-input');
    const decryptButton = document.getElementById('decrypt-button');
    const contentDiv = document.getElementById('secret-content');
    const controlsDiv = document.getElementById('secret-controls');
    const titleHeader = document.getElementById('page-title');

    function decrypt() {
      const password = passwordInput.value;
      if (!password) {
        alert("Please enter password！");
        return;
      }
      try {
        const decrypted = CryptoJS.AES.decrypt(encryptedContent, password);
        const plaintext = decrypted.toString(CryptoJS.enc.Utf8);

        if (plaintext) {
          contentDiv.innerHTML = marked.parse(plaintext);
          contentDiv.style.display = 'block';
          controlsDiv.style.display = 'none';
          titleHeader.innerText = "{{ page.title }}";
        } else {
          throw new Error('Decryption failed');
        }
      } catch (e) {
        alert("Password Error！");
        passwordInput.value = '';
      }
    }

    // 使用现代事件监听器来绑定事件
    decryptButton.addEventListener('click', decrypt);
    passwordInput.addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        decrypt();
      }
    }); // <--- 之前这里漏掉了一个 '}'，现在已经补上
  });
</script>